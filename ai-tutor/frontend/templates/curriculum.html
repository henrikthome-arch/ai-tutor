{% extends "base.html" %}

{% block title %}Curriculum Management - AI Tutor Admin{% endblock %}

{% block content %}
<div class="breadcrumb">
    <a href="{{ url_for('admin_dashboard') }}">üìä Dashboard</a> / 
    <span>üìö Curriculum</span>
</div>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h1 style="color: #2c3e50;">Curriculum Management</h1>
    <div>
        <a href="{{ url_for('add_curriculum') }}" class="btn btn-success">
            ‚ûï Add Curriculum
        </a>
        <a href="{{ url_for('admin_schools') }}" class="btn" style="background: #3498db;">
            üè´ Manage Schools
        </a>
    </div>
</div>

<div class="card">
    <div style="margin-bottom: 1.5rem;">
        <p>
            Manage curriculum content for different schools and grade levels. Each curriculum is associated with a specific school.
        </p>
    </div>

    {% if curriculums %}
    <table class="data-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>School</th>
                <th>Grade</th>
                <th>Subject</th>
                <th>Student Type</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for curriculum in curriculums %}
            <tr>
                <td>{{ curriculum.id }}</td>
                <td>{{ schools_dict[curriculum.school_id].name if curriculum.school_id in schools_dict else 'Unknown School' }}</td>
                <td>Grade {{ curriculum.grade }}</td>
                <td>{{ curriculum.subject }}</td>
                <td>{{ curriculum.student_type }}</td>
                <td>
                    <div class="action-buttons">
                        <a href="{{ url_for('edit_curriculum', curriculum_id=curriculum.id) }}" class="btn-small" title="Edit">
                            ‚úèÔ∏è
                        </a>
                        <form method="POST" action="{{ url_for('delete_curriculum', curriculum_id=curriculum.id) }}" 
                              onsubmit="return confirm('Are you sure you want to delete this curriculum?');" 
                              style="display: inline;">
                            <button type="submit" class="btn-small btn-danger" title="Delete">
                                üóëÔ∏è
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <p>No curriculum entries found.</p>
        <a href="{{ url_for('add_curriculum') }}" class="btn btn-success">
            ‚ûï Add First Curriculum
        </a>
    </div>
    {% endif %}
</div>

<div class="card" style="margin-top: 2rem;">
    <h2 style="color: #2c3e50; margin-top: 0;">Curriculum by School</h2>
    
    {% if schools %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
        {% for school in schools %}
        <div class="card" style="margin: 0; padding: 1rem;">
            <h3 style="margin-top: 0; color: #2c3e50;">{{ school.name }}</h3>
            <p style="color: #7f8c8d; font-size: 0.9rem;">{{ school.location }}</p>
            <p style="color: #7f8c8d; font-size: 0.9rem;">{{ school.curriculum_type }}</p>
            
            <a href="{{ url_for('school_curriculum', school_id=school.school_id) }}" class="btn" style="background: #3498db; margin-top: 0.5rem;">
                View Curriculum
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p>No schools found. Add a school first.</p>
        <a href="{{ url_for('add_school') }}" class="btn btn-success">
            ‚ûï Add School
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}